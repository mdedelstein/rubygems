#!/usr/bin/env ruby
# frozen_string_literal: true

$LOAD_PATH.unshift File.path('../lib')
require "rubygems"

load File.expand_path("../with_gemspec.rb", __FILE__)

rubygems_spec.spec.dependencies do |dep|
  begin
    gem dep.name, dep.requirement
  rescue Gem::LoadError => e
    $stderr.puts "#{e.message} (#{e.class})"
  end
end

Gem.finish_resolve if Gem.respond_to?(:finish_resolve)

load Gem.bin_path("rake", "rake")
